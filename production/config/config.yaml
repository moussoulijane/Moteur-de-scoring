# Configuration Production - Moteur de Scoring
# ==============================================

# Données
data:
  train_file: "data/raw/reclamations_2024.xlsx"
  test_file: "data/raw/reclamations_2025.xlsx"
  required_columns:
    - "Montant demandé"
    - "Famille Produit"
    - "Fondee"
  optional_columns:
    - "Délai estimé"
    - "Catégorie"
    - "Sous-catégorie"
    - "Segment"
    - "Marché"
    - "anciennete_annees"
    - "PNB analytique (vision commerciale) cumulé"
    - "Date de Qualification"
    - "Identifiant client"

# Preprocessing
preprocessing:
  min_samples_stats: 30  # Minimum d'échantillons pour stats robustes
  scaler_type: "robust"  # robust ou standard

# Modèles
models:
  algorithms:
    - xgboost
    - catboost
  default_model: "xgboost"

  # Hyperparamètres XGBoost
  xgboost:
    n_trials: 50
    param_space:
      n_estimators: [100, 500]
      max_depth: [3, 10]
      learning_rate: [0.01, 0.3]
      subsample: [0.6, 1.0]
      colsample_bytree: [0.6, 1.0]
      reg_alpha: [0.00000001, 10.0]
      reg_lambda: [0.00000001, 10.0]

  # Hyperparamètres CatBoost
  catboost:
    n_trials: 50
    param_space:
      iterations: [100, 500]
      depth: [4, 10]
      learning_rate: [0.01, 0.3]
      l2_leaf_reg: [0.00000001, 10.0]
      border_count: [32, 255]

# Seuils de décision
thresholds:
  optimization:
    threshold_low_range: [0.05, 0.50]
    threshold_high_range: [0.50, 0.98]
    step: 0.02
    min_precision_reject: 0.93
    min_precision_validate: 0.90
    min_precision_reject_relaxed: 0.90
    min_precision_validate_relaxed: 0.87
  default:
    low: 0.30
    high: 0.70

# Règles métier
business_rules:
  max_validations_per_client_per_year: 1
  check_amount_vs_pnb: true

# Métriques
metrics:
  prix_unitaire_dh: 169
  cv_folds: 5
  random_state: 42

# Paths de sauvegarde
paths:
  models_dir: "models"
  logs_dir: "logs"
  outputs_dir: "outputs"

# API Configuration
api:
  host: "0.0.0.0"
  port: 5000
  debug: false
  cors_enabled: true
  max_content_length: 16777216  # 16MB
  rate_limit:
    enabled: true
    requests_per_minute: 60
  auth:
    enabled: false
    api_key_header: "X-API-Key"

# Logging
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "production/logs/app.log"
  max_bytes: 10485760  # 10MB
  backup_count: 5

# Monitoring
monitoring:
  enable_drift_detection: true
  drift_threshold: 0.05
  alert_on_low_confidence: true
  low_confidence_threshold: 0.30
